function Y(){import.meta.url,import("_").catch(()=>1);async function*t(){}}(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))e(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&e(r)}).observe(document,{childList:!0,subtree:!0});function i(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function e(s){if(s.ep)return;s.ep=!0;const n=i(s);fetch(s.href,n)}})();const N=()=>{const t=document.querySelector(".post__text"),o="Привет! Я новичок в программировании. Подскажите, с какого языка лучше начать? Только не предлагайте JavaScript, он очень сложный....";t.textContent=o},L=t=>{const{triggerSelector:o,likeSelector:i,counterSelector:e,defaultLike:s="fa-regular",activeLike:n="fa-solid",activeCounter:r="like-counter_red"}=t,u=document.querySelectorAll(o),a=document.querySelectorAll(i),l=document.querySelectorAll(e);let d;l.forEach(m=>{d=+m.textContent,d===0&&(m.style.display="none")}),u.forEach((m,c)=>{m.addEventListener("click",()=>{d=+l[c].textContent,a[c].classList.contains(s)?(l[c].style.display="flex",d++,a[c].classList.remove(s),a[c].classList.add(n),l[c].classList.add(r),l[c].textContent=d):(d--,d===0&&(l[c].style.display="none"),a[c].classList.add(s),a[c].classList.remove(n),l[c].classList.remove(r),l[c].textContent=d)})})},T=()=>{const t=document.forms.commentaries,o=document.querySelector(".speech-wrapper"),i=document.querySelector(".message-help__text_blue"),e=document.querySelector(".commentaries-form__name");o.addEventListener("click",()=>{t.classList.toggle("commentaries-form_hidden"),e.focus()}),i.addEventListener("click",()=>{t.classList.remove("commentaries-form_hidden"),e.focus()})},q=t=>{let o=t.split("-").reverse().join(".");const i=new Date,e=u=>u<10?`0${u}`:u,s=e(i.getDate()),n=e(i.getDate()-1),r=e(i.getDate()-2);switch(o||(o=`${e(i.getDate())}.${e(+i.getMonth()+1)}.${i.getFullYear()}`),!0){case o.startsWith(s):return o="сегодня";case o.startsWith(n):return o="вчера";case o.startsWith(r):return o="2 дня назад";default:return o}},C=t=>{let o=t.split("-").reverse().join("-");const i=new Date,e=s=>s<10?`0${s}`:s;return o||(o=`${e(i.getDate())}-${e(+i.getMonth()+1)}-${i.getFullYear()}`),o},z=t=>{document.querySelectorAll(".commentaries__item").forEach((i,e)=>{i.querySelector(".commentaries__delete").addEventListener("click",()=>{i.remove(),t.splice(e,1),localStorage.setItem("comments",JSON.stringify(t)),y(t)})})},D=t=>{const o=document.querySelector(".answer-counter");t?(o.style.display="flex",o.textContent=t):o.style.display="none"},H=(t,o)=>{const i=document.createElement("li");return i.classList.add("commentaries__item"),i.innerHTML=`
      <div class="commentaries__header">
        <section class="commentaries__author-wrapper" >
            <h3 class="commentaries__author"></h3>
            <time class="commentaries__date" datetime=${t}>${o}</time>
        </section>
        <i class="commentaries__delete fa-regular fa-trash-can" title="Удалить комментарий"></i>
      </div>
      <div class="commentaries__content">
        <p class="commentaries__text"></p>
        <div class="commentaries-actions" title="Нравится">
            <i class="commentaries-actions__icon fa-regular fa-heart commentaries-like"></i>
            <div class="commentaries-actions__counter commentaries-like-counter">0</div>
        </div>
      </div>
  `,i},y=t=>{const o=document.querySelector(".commentaries__list"),i=document.forms.commentaries;((s,n,r,u)=>{const a=document.querySelector(".commentaries"),l=document.querySelector(".message-help");s.length?(a.classList.remove(n),l.classList.add(r)):(a.classList.add(n),l.classList.remove(r),i.classList.add(u))})(t,"commentaries_hidden","message-help_hidden","commentaries-form_hidden"),o.innerHTML="",t.forEach((s,n)=>{const{author:r,date:u,dateForTimeAttr:a,comment:l}=s,d=H(a,u);o.append(d);const m=document.querySelectorAll(".commentaries__author");m[n].textContent=r;const c=document.querySelectorAll(".commentaries__text");c[n].textContent=l}),L({triggerSelector:".commentaries-actions",likeSelector:".commentaries-like",counterSelector:".commentaries-like-counter"}),D(t.length),z(t)},O=()=>{const t=document.forms.commentaries,o=t.elements.author,i=t.elements.date,e=t.elements.textfield,s=t.querySelector(".commentaries-form__close"),n=document.createElement("div");n.classList.add("commentaries-form__error_hidden"),n.textContent="Это поле обязательно для заполнения!",e.parentNode.before(n);let r=[];y(r),localStorage.getItem("comments")&&(r=JSON.parse(localStorage.getItem("comments")),y(r));const u=a=>{if(a.which===13&&!a.shiftKey&&(a.preventDefault(),!a.repeat)){const l=new Event("submit",{cancelable:!0});a.target.form.dispatchEvent(l)}};e.addEventListener("keydown",u),s.addEventListener("click",()=>{t.classList.add("commentaries-form_hidden")}),t.addEventListener("submit",a=>{a.preventDefault();const l=(m,c)=>{(!c.value||c.value.trim()==="")&&(c.addEventListener("input",()=>{m.removeAttribute("disabled"),n.classList.remove("commentaries-form__error"),n.classList.add("commentaries-form__error_hidden"),c.classList.remove("input_error")}),n.classList.add("commentaries-form__error"),n.classList.remove("commentaries-form__error_hidden"),c.classList.add("input_error"),c.focus(),m.setAttribute("disabled"))};l(e,o),l(o,e);const d={author:o.value,date:q(i.value),dateForTimeAttr:C(i.value),comment:e.value};r.push(d),console.log(r),y(r),localStorage.setItem("comments",JSON.stringify(r)),a.target.reset()})};var v=new Map;function W(t){var o=v.get(t);o&&o.destroy()}function $(t){var o=v.get(t);o&&o.update()}var h=null;typeof window>"u"?((h=function(t){return t}).destroy=function(t){return t},h.update=function(t){return t}):((h=function(t,o){return t&&Array.prototype.forEach.call(t.length?t:[t],function(i){return function(e){if(e&&e.nodeName&&e.nodeName==="TEXTAREA"&&!v.has(e)){var s,n=null,r=window.getComputedStyle(e),u=(s=e.value,function(){l({testForHeightReduction:s===""||!e.value.startsWith(s),restoreTextAlign:null}),s=e.value}),a=function(m){e.removeEventListener("autosize:destroy",a),e.removeEventListener("autosize:update",d),e.removeEventListener("input",u),window.removeEventListener("resize",d),Object.keys(m).forEach(function(c){return e.style[c]=m[c]}),v.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,textAlign:e.style.textAlign,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",a),e.addEventListener("autosize:update",d),e.addEventListener("input",u),window.addEventListener("resize",d),e.style.overflowX="hidden",e.style.wordWrap="break-word",v.set(e,{destroy:a,update:d}),d()}function l(m){var c,p,w=m.restoreTextAlign,g=w===void 0?null:w,S=m.testForHeightReduction,k=S===void 0||S,b=r.overflowY;if(e.scrollHeight!==0&&(r.resize==="vertical"?e.style.resize="none":r.resize==="both"&&(e.style.resize="horizontal"),k&&(c=function(f){for(var E=[];f&&f.parentNode&&f.parentNode instanceof Element;)f.parentNode.scrollTop&&E.push([f.parentNode,f.parentNode.scrollTop]),f=f.parentNode;return function(){return E.forEach(function(A){var _=A[0],F=A[1];_.style.scrollBehavior="auto",_.scrollTop=F,_.style.scrollBehavior=null})}}(e),e.style.height=""),p=r.boxSizing==="content-box"?e.scrollHeight-(parseFloat(r.paddingTop)+parseFloat(r.paddingBottom)):e.scrollHeight+parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),r.maxHeight!=="none"&&p>parseFloat(r.maxHeight)?(r.overflowY==="hidden"&&(e.style.overflow="scroll"),p=parseFloat(r.maxHeight)):r.overflowY!=="hidden"&&(e.style.overflow="hidden"),e.style.height=p+"px",g&&(e.style.textAlign=g),c&&c(),n!==p&&(e.dispatchEvent(new Event("autosize:resized",{bubbles:!0})),n=p),b!==r.overflow&&!g)){var x=r.textAlign;r.overflow==="hidden"&&(e.style.textAlign=x==="start"?"end":"start"),l({restoreTextAlign:x,testForHeightReduction:!0})}}function d(){l({testForHeightReduction:!0,restoreTextAlign:null})}}(i)}),t}).destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],W),t},h.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],$),t});var M=h;const B=()=>{const t=document.querySelector(".commentaries-form__text-field");return M(t)};window.addEventListener("DOMContentLoaded",()=>{N(),L({triggerSelector:".like-wrapper",likeSelector:".post-like",counterSelector:".like-counter"}),L({triggerSelector:".commentaries-actions",likeSelector:".commentaries-like",counterSelector:".commentaries-like-counter"}),T(),O(),B()});export{Y as __vite_legacy_guard};
