function j(){import.meta.url,import("_").catch(()=>1);async function*e(){}}(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&t(n)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();const F=()=>{const e=document.querySelector(".post__text"),o="Привет! Я новичок в программировании. Подскажите, с какого языка лучше начать? Только не предлагайте JavaScript, он очень сложный....";e.textContent=o},T=()=>{const e=document.forms.commentaries,o=document.querySelector(".speech-wrapper"),s=document.querySelector(".message-help__text_blue"),t=document.querySelector(".commentaries-form__name");o.addEventListener("click",()=>{e.classList.toggle("commentaries-form_hidden"),t.focus()}),s.addEventListener("click",()=>{e.classList.remove("commentaries-form_hidden"),t.focus()})},$=e=>{let o=e.split("-").reverse().join(".");const s=new Date,t=a=>a<10?`0${a}`:a,r=t(s.getDate()),i=t(s.getDate()-1),n=t(s.getDate()-2);switch(o||(o=`${t(s.getDate())}.${t(+s.getMonth()+1)}.${s.getFullYear()}`),!0){case o.startsWith(r):return o="сегодня";case o.startsWith(i):return o="вчера";case o.startsWith(n):return o="2 дня назад";default:return o}},q=e=>{let o=e.split("-").reverse().join("-");const s=new Date,t=r=>r<10?`0${r}`:r;return o||(o=`${t(s.getDate())}-${t(+s.getMonth()+1)}-${s.getFullYear()}`),o},z=e=>{const{commentsData:o,triggerSelector:s,counterSelector:t}=e,r=document.querySelectorAll(s),i=document.querySelectorAll(t);o.forEach((n,a)=>{let c;console.log(n.likeCounter),c=n.likeCounter,c===0&&(i[a].style.display="none"),r[a].addEventListener("click",()=>{n.isLiked===!1?(n.isLiked=!0,i[a].style.display="flex",c++):(n.isLiked=!1,c--,c===0&&(i[a].style.display="none")),n.likeCounter=c,localStorage.setItem("comments",JSON.stringify(o)),y(JSON.parse(localStorage.getItem("comments")))})})},D=e=>{document.querySelectorAll(".commentaries__item").forEach((s,t)=>{s.querySelector(".commentaries__delete").addEventListener("click",()=>{s.remove(),e.splice(t,1),localStorage.setItem("comments",JSON.stringify(e)),y(e)})})},O=e=>{const o=document.querySelector(".answer-counter");e?(o.style.display="flex",o.textContent=e):o.style.display="none"},H=(e,o,s,t)=>{const r=document.createElement("li");return r.classList.add("commentaries__item"),r.innerHTML=`
      <div class="commentaries__header">
        <section class="commentaries__author-wrapper" >
            <h3 class="commentaries__author"></h3>
            <time class="commentaries__date" datetime=${e}>${o}</time>
        </section>
        <i class="commentaries__delete fa-regular fa-trash-can" title="Удалить комментарий"></i>
      </div>
      <div class="commentaries__content">
        <p class="commentaries__text"></p>
        <div class="commentaries-actions" title="Нравится">
            <i class="commentaries-actions__icon ${s?"fa-solid":"fa-regular"} fa-heart commentaries-like"></i>
            <div class="commentaries-actions__counter commentaries-like-counter ${s?"like-counter_red":""}">${t}</div>
        </div>
      </div>
  `,r},M=(e,o,s,t)=>{const r=document.querySelector(".commentaries"),i=document.querySelector(".message-help"),n=document.forms.commentaries;e.length?(r.classList.remove(o),i.classList.add(s)):(r.classList.add(o),i.classList.remove(s),n.classList.add(t))},y=e=>{const o=document.querySelector(".commentaries__list");M(e,"commentaries_hidden","message-help_hidden","commentaries-form_hidden"),o.innerHTML="",e.forEach((s,t)=>{const{author:r,date:i,dateForTimeAttr:n,comment:a,isLiked:c,likeCounter:h}=s,l=H(n,i,c,h);o.append(l);const u=document.querySelectorAll(".commentaries__author");u[t].textContent=r;const d=document.querySelectorAll(".commentaries__text");d[t].textContent=a}),z({commentsData:e,triggerSelector:".commentaries-actions",likeSelector:".commentaries-like",counterSelector:".commentaries-like-counter"}),O(e.length),D(e)},W=document.forms.commentaries,J=W.elements.textfield,f=document.createElement("div");f.classList.add("commentaries-form__error_hidden");f.textContent="Это поле обязательно для заполнения!";J.parentNode.before(f);const A=(e,o)=>{(!o.value||o.value.trim()==="")&&(o.addEventListener("input",()=>{e.removeAttribute("disabled"),f.classList.remove("commentaries-form__error"),f.classList.add("commentaries-form__error_hidden"),o.classList.remove("input_error")}),f.classList.add("commentaries-form__error"),f.classList.remove("commentaries-form__error_hidden"),o.classList.add("input_error"),o.focus(),e.setAttribute("disabled"))},P=()=>{const e=document.forms.commentaries,o=e.elements.author,s=e.elements.date,t=e.elements.textfield,r=e.querySelector(".commentaries-form__close");let i=[];localStorage.getItem("comments")&&(i=JSON.parse(localStorage.getItem("comments")),y(i));const n=a=>{if(a.which===13&&!a.shiftKey&&(a.preventDefault(),!a.repeat)){const c=new Event("submit",{cancelable:!0});a.target.form.dispatchEvent(c)}};t.addEventListener("keydown",n),r.addEventListener("click",()=>{e.classList.add("commentaries-form_hidden")}),e.addEventListener("submit",a=>{a.preventDefault(),A(t,o),A(o,t);const c={author:o.value,date:$(s.value),dateForTimeAttr:q(s.value),comment:t.value,isLiked:!1,likeCounter:0};i.push(c),localStorage.setItem("comments",JSON.stringify(i)),console.log(i),y(i),a.target.reset()})};var v=new Map;function B(e){var o=v.get(e);o&&o.destroy()}function Y(e){var o=v.get(e);o&&o.update()}var g=null;typeof window>"u"?((g=function(e){return e}).destroy=function(e){return e},g.update=function(e){return e}):((g=function(e,o){return e&&Array.prototype.forEach.call(e.length?e:[e],function(s){return function(t){if(t&&t.nodeName&&t.nodeName==="TEXTAREA"&&!v.has(t)){var r,i=null,n=window.getComputedStyle(t),a=(r=t.value,function(){h({testForHeightReduction:r===""||!t.value.startsWith(r),restoreTextAlign:null}),r=t.value}),c=function(u){t.removeEventListener("autosize:destroy",c),t.removeEventListener("autosize:update",l),t.removeEventListener("input",a),window.removeEventListener("resize",l),Object.keys(u).forEach(function(d){return t.style[d]=u[d]}),v.delete(t)}.bind(t,{height:t.style.height,resize:t.style.resize,textAlign:t.style.textAlign,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",c),t.addEventListener("autosize:update",l),t.addEventListener("input",a),window.addEventListener("resize",l),t.style.overflowX="hidden",t.style.wordWrap="break-word",v.set(t,{destroy:c,update:l}),l()}function h(u){var d,p,k=u.restoreTextAlign,_=k===void 0?null:k,S=u.testForHeightReduction,C=S===void 0||S,b=n.overflowY;if(t.scrollHeight!==0&&(n.resize==="vertical"?t.style.resize="none":n.resize==="both"&&(t.style.resize="horizontal"),C&&(d=function(m){for(var x=[];m&&m.parentNode&&m.parentNode instanceof Element;)m.parentNode.scrollTop&&x.push([m.parentNode,m.parentNode.scrollTop]),m=m.parentNode;return function(){return x.forEach(function(E){var L=E[0],N=E[1];L.style.scrollBehavior="auto",L.scrollTop=N,L.style.scrollBehavior=null})}}(t),t.style.height=""),p=n.boxSizing==="content-box"?t.scrollHeight-(parseFloat(n.paddingTop)+parseFloat(n.paddingBottom)):t.scrollHeight+parseFloat(n.borderTopWidth)+parseFloat(n.borderBottomWidth),n.maxHeight!=="none"&&p>parseFloat(n.maxHeight)?(n.overflowY==="hidden"&&(t.style.overflow="scroll"),p=parseFloat(n.maxHeight)):n.overflowY!=="hidden"&&(t.style.overflow="hidden"),t.style.height=p+"px",_&&(t.style.textAlign=_),d&&d(),i!==p&&(t.dispatchEvent(new Event("autosize:resized",{bubbles:!0})),i=p),b!==n.overflow&&!_)){var w=n.textAlign;n.overflow==="hidden"&&(t.style.textAlign=w==="start"?"end":"start"),h({restoreTextAlign:w,testForHeightReduction:!0})}}function l(){h({testForHeightReduction:!0,restoreTextAlign:null})}}(s)}),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],B),e},g.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],Y),e});var I=g;const R=()=>{const e=document.querySelector(".commentaries-form__text-field");return I(e)},X=()=>{let e={isLiked:!1,likesCounter:100};localStorage.getItem("mainPostLikeState")&&(e=JSON.parse(localStorage.getItem("mainPostLikeState")));const o=document.createElement("div");return o.className="post-actions__icon-wrapper like-wrapper",o.setAttribute("title","Нравится"),o.innerHTML=`
        <i class="post-actions__icon ${e.isLiked?"fa-solid":"fa-regular"} fa-heart post-like"></i>
        <div class="post-actions__counter like-counter ${e.isLiked?"like-counter_red":""}">${e.likesCounter}</div>
    `,o.addEventListener("click",()=>{let s=e.likesCounter;e.isLiked?(s--,e={isLiked:!1,likesCounter:s}):(s++,e={isLiked:!0,likesCounter:s}),localStorage.setItem("mainPostLikeState",JSON.stringify(e)),o.innerHTML=`
            <i class="post-actions__icon ${e.isLiked?"fa-solid":"fa-regular"} fa-heart post-like"></i>
            <div class="post-actions__counter like-counter ${e.isLiked?"like-counter_red":""}">${e.likesCounter}</div>
        `}),o};window.addEventListener("DOMContentLoaded",()=>{document.querySelector(".post-actions").prepend(X()),F(),T(),P(),R()});export{j as __vite_legacy_guard};
