function j(){import.meta.url,import("_").catch(()=>1);async function*t(){}}(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))e(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&e(n)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function e(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();const T=()=>{const t=document.querySelector(".post__text"),o="Привет! Я новичок в программировании. Подскажите, с какого языка лучше начать? Только не предлагайте JavaScript, он очень сложный....";t.textContent=o},N=()=>{const t=document.forms.commentaries,o=document.querySelector(".speech-wrapper"),s=document.querySelector(".message-help__text_blue"),e=document.querySelector(".commentaries-form__name");o.addEventListener("click",()=>{t.classList.toggle("commentaries-form_hidden"),e.focus()}),s.addEventListener("click",()=>{t.classList.remove("commentaries-form_hidden"),e.focus()})},q=t=>{let o=t.split("-").reverse().join(".");const s=new Date,e=a=>a<10?`0${a}`:a,r=e(s.getDate()),i=e(s.getDate()-1),n=e(s.getDate()-2);switch(o||(o=`${e(s.getDate())}.${e(+s.getMonth()+1)}.${s.getFullYear()}`),!0){case o.startsWith(r):return o="сегодня";case o.startsWith(i):return o="вчера";case o.startsWith(n):return o="2 дня назад";default:return o}},z=t=>{let o=t.split("-").reverse().join("-");const s=new Date,e=r=>r<10?`0${r}`:r;return o||(o=`${e(s.getDate())}-${e(+s.getMonth()+1)}-${s.getFullYear()}`),o},D=t=>{const{commentsData:o=[],triggerSelector:s,counterSelector:e}=t,r=document.querySelectorAll(s),i=document.querySelectorAll(e);o.forEach((n,a)=>{let c;console.log(n.likeCounter),c=n.likeCounter,c===0&&(i[a].style.display="none"),r[a].addEventListener("click",()=>{n.isLiked===!1?(n.isLiked=!0,i[a].style.display="flex",c++):(n.isLiked=!1,c--,c===0&&(i[a].style.display="none")),n.likeCounter=c,g(o)})})},$=t=>{document.querySelectorAll(".commentaries__item").forEach((s,e)=>{s.querySelector(".commentaries__delete").addEventListener("click",()=>{s.remove(),t.splice(e,1),localStorage.setItem("comments",JSON.stringify(t)),g(t)})})},H=t=>{const o=document.querySelector(".answer-counter");t?(o.style.display="flex",o.textContent=t):o.style.display="none"},O=(t,o,s,e)=>{const r=document.createElement("li");return r.classList.add("commentaries__item"),r.innerHTML=`
      <div class="commentaries__header">
        <section class="commentaries__author-wrapper" >
            <h3 class="commentaries__author"></h3>
            <time class="commentaries__date" datetime=${t}>${o}</time>
        </section>
        <i class="commentaries__delete fa-regular fa-trash-can" title="Удалить комментарий"></i>
      </div>
      <div class="commentaries__content">
        <p class="commentaries__text"></p>
        <div class="commentaries-actions" title="Нравится">
            <i class="commentaries-actions__icon ${s?"fa-solid":"fa-regular"} fa-heart commentaries-like"></i>
            <div class="commentaries-actions__counter commentaries-like-counter ${s?"like-counter_red":""}">${e}</div>
        </div>
      </div>
  `,r},W=(t,o,s,e)=>{const r=document.querySelector(".commentaries"),i=document.querySelector(".message-help"),n=document.forms.commentaries;t.length?(r.classList.remove(o),i.classList.add(s)):(r.classList.add(o),i.classList.remove(s),n.classList.add(e))},g=t=>{const o=document.querySelector(".commentaries__list");W(t,"commentaries_hidden","message-help_hidden","commentaries-form_hidden"),o.innerHTML="",t.forEach((s,e)=>{const{author:r,date:i,dateForTimeAttr:n,comment:a,isLiked:c,likeCounter:h}=s,l=O(n,i,c,h);o.append(l);const u=document.querySelectorAll(".commentaries__author");u[e].textContent=r;const d=document.querySelectorAll(".commentaries__text");d[e].textContent=a}),D({commentsData:t,triggerSelector:".commentaries-actions",likeSelector:".commentaries-like",counterSelector:".commentaries-like-counter"}),H(t.length),$(t)},M=document.forms.commentaries,Y=M.elements.textfield,f=document.createElement("div");f.classList.add("commentaries-form__error_hidden");f.textContent="Это поле обязательно для заполнения!";Y.parentNode.before(f);const b=(t,o)=>{(!o.value||o.value.trim()==="")&&(o.addEventListener("input",()=>{t.removeAttribute("disabled"),f.classList.remove("commentaries-form__error"),f.classList.add("commentaries-form__error_hidden"),o.classList.remove("input_error")}),f.classList.add("commentaries-form__error"),f.classList.remove("commentaries-form__error_hidden"),o.classList.add("input_error"),o.focus(),t.setAttribute("disabled"))},B=()=>{const t=document.forms.commentaries,o=t.elements.author,s=t.elements.date,e=t.elements.textfield,r=t.querySelector(".commentaries-form__close");let i=[];localStorage.getItem("comments")&&(i=JSON.parse(localStorage.getItem("comments")),g(i));const n=a=>{if(a.which===13&&!a.shiftKey&&(a.preventDefault(),!a.repeat)){const c=new Event("submit",{cancelable:!0});a.target.form.dispatchEvent(c)}};e.addEventListener("keydown",n),r.addEventListener("click",()=>{t.classList.add("commentaries-form_hidden")}),t.addEventListener("submit",a=>{a.preventDefault(),b(e,o),b(o,e);const c={author:o.value,date:q(s.value),dateForTimeAttr:z(s.value),comment:e.value,isLiked:!1,likeCounter:0};i.push(c),localStorage.setItem("comments",JSON.stringify(i)),console.log(i),g(i),a.target.reset()})};var y=new Map;function R(t){var o=y.get(t);o&&o.destroy()}function J(t){var o=y.get(t);o&&o.update()}var v=null;typeof window>"u"?((v=function(t){return t}).destroy=function(t){return t},v.update=function(t){return t}):((v=function(t,o){return t&&Array.prototype.forEach.call(t.length?t:[t],function(s){return function(e){if(e&&e.nodeName&&e.nodeName==="TEXTAREA"&&!y.has(e)){var r,i=null,n=window.getComputedStyle(e),a=(r=e.value,function(){h({testForHeightReduction:r===""||!e.value.startsWith(r),restoreTextAlign:null}),r=e.value}),c=function(u){e.removeEventListener("autosize:destroy",c),e.removeEventListener("autosize:update",l),e.removeEventListener("input",a),window.removeEventListener("resize",l),Object.keys(u).forEach(function(d){return e.style[d]=u[d]}),y.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,textAlign:e.style.textAlign,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",c),e.addEventListener("autosize:update",l),e.addEventListener("input",a),window.addEventListener("resize",l),e.style.overflowX="hidden",e.style.wordWrap="break-word",y.set(e,{destroy:c,update:l}),l()}function h(u){var d,p,w=u.restoreTextAlign,_=w===void 0?null:w,x=u.testForHeightReduction,k=x===void 0||x,F=n.overflowY;if(e.scrollHeight!==0&&(n.resize==="vertical"?e.style.resize="none":n.resize==="both"&&(e.style.resize="horizontal"),k&&(d=function(m){for(var S=[];m&&m.parentNode&&m.parentNode instanceof Element;)m.parentNode.scrollTop&&S.push([m.parentNode,m.parentNode.scrollTop]),m=m.parentNode;return function(){return S.forEach(function(A){var L=A[0],C=A[1];L.style.scrollBehavior="auto",L.scrollTop=C,L.style.scrollBehavior=null})}}(e),e.style.height=""),p=n.boxSizing==="content-box"?e.scrollHeight-(parseFloat(n.paddingTop)+parseFloat(n.paddingBottom)):e.scrollHeight+parseFloat(n.borderTopWidth)+parseFloat(n.borderBottomWidth),n.maxHeight!=="none"&&p>parseFloat(n.maxHeight)?(n.overflowY==="hidden"&&(e.style.overflow="scroll"),p=parseFloat(n.maxHeight)):n.overflowY!=="hidden"&&(e.style.overflow="hidden"),e.style.height=p+"px",_&&(e.style.textAlign=_),d&&d(),i!==p&&(e.dispatchEvent(new Event("autosize:resized",{bubbles:!0})),i=p),F!==n.overflow&&!_)){var E=n.textAlign;n.overflow==="hidden"&&(e.style.textAlign=E==="start"?"end":"start"),h({restoreTextAlign:E,testForHeightReduction:!0})}}function l(){h({testForHeightReduction:!0,restoreTextAlign:null})}}(s)}),t}).destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],R),t},v.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],J),t});var P=v;const X=()=>{const t=document.querySelector(".commentaries-form__text-field");return P(t)};window.addEventListener("DOMContentLoaded",()=>{T(),N(),B(),X()});export{j as __vite_legacy_guard};
